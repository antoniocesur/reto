<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>El Reto JS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body>
    <div class="container" id="contenedor">

    </div>
    <div class="container" id="botones">
        <button class="btn btn-primary" id="siguiente">Siguiente</button>
        <button class="btn btn-primary" id="nueva">Nueva partida</button>
    </div>

    <script>
        var pos=0; //Es la posici贸n de la palabra que toca adivinar para que sea aleatoria
        document.getElementById("siguiente").onclick=ponerDefinicion;
        var listaPalabras;
        var partida=aleatorios(6,6);

        function fetchData() {
          fetch("/lista6")
            .then((response) => response.json())
            .then((json) => takeData(json));
        }

        function takeData(val) {                        
            //Pongo las 3 primeras letras de las 6 palabras
            for(let p in val){
                let element = document.createElement("h2");
                element.innerHTML=val[p].ini3;
                document.getElementById('contenedor').appendChild(element);
            }
            listaPalabras=val; //Guardo la referencia en una variable global

            /*//Versi贸n desordenada de la lista
            const desordenada=structuredClone(val);
            desordenada.sort(randomize);*/

            //Pongo la primera definici贸n
            let element = document.createElement("h3");
            element.id="definicion";
            element.innerHTML=val[partida[pos]].definicion;
            document.getElementById('contenedor').appendChild(element);
            
            return console.log(val);
        }

        function ponerDefinicion(){
            pos++;
            //Pongo la nueva definici贸n
            let element = document.getElementById("definicion");
            element.innerHTML=listaPalabras[partida[pos]].definicion;            
        }

        function aleatorios(cantidad, maxValor){
            var nums=[];
            var repetido, aux;
            for(var n=0; n<cantidad; n++){
                do{
                    aux=Math.floor(Math.random() * maxValor);
                    repetido=false;
                    for(var m=0; m<n; m++){
                        if(nums[m]==aux)
                            repetido=true;
                    }
                }while(repetido);        
                nums[n]=aux
            }
            return nums;
        }

        function randomize(a, b) {
            return Math.random() - 0.5;
        }

        fetchData();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>